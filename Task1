//TASK 1 - QUESTION 1

//Get custom fields num_1 and num_2
def number1 = issue.getCustomFieldValue("num_1")
def number2 = issue.getCustomFieldValue("num_2")

//Returns the sum of the two number fields
return number1 + number2

//--------------------------------------------------------------------------------------------------//
//TASK 1 - QUESTION 2

import com.atlassian.jira.component.ComponentAccessor
import com.atlassian.jira.event.type.EventDispatchOption

def issueManager = ComponentAccessor.issueManager
def commentManager = ComponentAccessor.commentManager
def user = ComponentAccessor.jiraAuthenticationContext.loggedInUser
def issueId = event.issue.id
def issue = issueManager.getIssueObject(issueId)

// Get the issue's latest comment
def latestComment = commentManager.getComments(issue).last()

// Update the issue description with the latest comment
issue.setDescription(latestComment.body)

// Update the issue
ComponentAccessor.issueManager.updateIssue(user, issue, EventDispatchOption.ISSUE_UPDATED, false)

//--------------------------------------------------------------------------------------------------//
//TASK 1 - QUESTION 3

import com.atlassian.jira.component.ComponentAccessor

//Gets the Priority and Summary Fields
def priorityField = getFieldById(getFieldChanged())
def summaryField = getFieldById("summary")

//Gets the value of the Priority Field
def priorityValue = priorityField.getValue().getName()

//Gets the value of the Summary Field
def summaryValue = summaryField.getValue()

//Checks if the Priority is High or Highest
if (priorityValue == "High" || priorityValue == "Highest")
{
    if (!summaryValue.contains("URGENT: ")) {
        summaryField.setFormValue("URGENT: " + summaryValue)
    }
}
else
{
    def str = summaryValue.replace("URGENT: ", "")
    summaryField.setFormValue(str)
}
